<div class="main-body">
  <h1>Recipes</h1>
  <mat-form-field class="search-field" appearance="outline">
    <mat-label>Find a recipe...</mat-label>
    <input matInput type="text" [(ngModel)]="searchValue" (keydown.enter)="getRecipesByTitle()" >
    <mat-icon matPrefix>search</mat-icon>
    <button class="search-btn" matSuffix mat-raised-button color="primary" aria-label="Search" type="submit"
      (click)="getRecipesByTitle()">
      Search
    </button>
  </mat-form-field>
  <button class="filter-btn" mat-raised-button [matMenuTriggerFor]="filterMenu"><mat-icon
      iconPositionEnd>expand_more</mat-icon> Filter Recipes</button>
  <mat-menu #filterMenu="matMenu">
    <div mat-menu-item (click)="$event.stopPropagation()">
      <mat-form-field class="filter-field" appearance="outline">
        <mat-label>Category</mat-label>
        <mat-select [(ngModel)]="recipeType" (selectionChange)="onSelectFilter()">
          <mat-option>- Any -</mat-option>
          <mat-option *ngFor="let recipeType of recipeTypes" [value]="recipeType">
            {{recipeType}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div mat-menu-item (click)="$event.stopPropagation()">
      <mat-form-field class="filter-field" appearance="outline">
        <mat-label>Dish Type</mat-label>
        <mat-select [(ngModel)]="dishType" (selectionChange)="onSelectFilter()">
          <mat-option>- Any -</mat-option>
          <mat-option *ngFor="let dishType of dishTypes" [value]="dishType">
            {{dishType}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div mat-menu-item (click)="$event.stopPropagation()">
      <mat-form-field class="filter-field" appearance="outline">
        <mat-label>Cuisine</mat-label>
        <mat-select [(ngModel)]="cuisineType" (selectionChange)="onSelectFilter()">
          <mat-option>- Any -</mat-option>
          <mat-option *ngFor="let cuisineType of cuisineTypes" [value]="cuisineType">
            {{cuisineType}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div mat-menu-item class="clear-btn" (click)="$event.stopPropagation()">
      <button mat-raised-button color="accent" (click)="clearFilter()">Clear Filter</button>
    </div>
  </mat-menu>
  <div class="flex-container">
    <p *ngIf="!recipes">No recipes found.</p>
    <mat-card class="recipe-card" *ngFor="let recipe of recipes">
      <img mat-card-image class="element-image" src="../../../../../assets/recipe-images/{{recipe.imageName}}.jpg"
        [routerLink]="['details',recipe.id]">
      <mat-card-title [routerLink]="['details',recipe.id]">{{recipe.title}}</mat-card-title>
      <mat-card-content>
        <div class="rating">
          <mat-icon>star</mat-icon><mat-icon>star</mat-icon><mat-icon>star</mat-icon><mat-icon>star_border</mat-icon><mat-icon>star_border</mat-icon>
        </div>
        <p>4.4</p>
        <!-- <button mat-button class="right-button"><mat-icon>favorite_border</mat-icon></button> -->
      </mat-card-content>
    </mat-card>
  </div>
</div>